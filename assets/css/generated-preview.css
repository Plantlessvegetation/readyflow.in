/* assets/css/generated-preview.css */

/* --- General Preview Container Styles --- */
.preview-container {
    max-width: 900px; /* Increased max-width for better layout */
    margin: 80px auto;
    padding: 40px;
    background-color: var(--bg-secondary);
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.15); /* More prominent shadow */
    text-align: center;
    display: flex; /* Use flexbox for internal layout */
    flex-direction: column;
    gap: 30px; /* Spacing between main sections */
    border: 1px solid var(--border-subtle); /* Ensure border is always present */
}

/* --- Preview Header (now inside dynamic sections) --- */
.preview-header {
    margin-bottom: 20px; /* Space below the header when it's displayed */
}

.preview-header h2 {
    font-size: 2.8rem; /* Larger, more impactful headline */
    color: var(--text-primary);
    margin-bottom: 10px;
    font-weight: 800; /* Bolder font */
    line-height: 1.2;
}

.preview-header p.subheadline {
    font-size: 1.3rem; /* Prominent subheadline */
    color: var(--text-muted);
    margin-bottom: 0;
}

/* --- State Sections (Common Styling for Loading, Generated, Error) --- */
.preview-state-section {
    padding: 30px; /* Consistent padding */
    border-radius: 12px;
    /* Removed individual margin-bottom here, rely on gap in .preview-container */
}

/* --- Loading State --- */
.loading-state {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px; /* Increased gap */
    box-shadow: inset 0 0 10px rgba(39, 174, 96, 0.1); /* Subtle inner shadow */
    padding: 50px; /* More padding */
    animation: pulseGlowDark 2s infinite alternate; /* Applied dark theme animation by default */
}
/* Define separate keyframes for light and dark themes or use CSS variables within one keyframe */
/* Re-evaluating pulseGlow for better theme integration */
@keyframes pulseGlowDark { /* Specific keyframe for dark theme green glow */
    0% { box-shadow: inset 0 0 10px rgba(39, 174, 96, 0.1), 0 0 0 rgba(39, 174, 96, 0); }
    100% { box-shadow: inset 0 0 15px rgba(39, 174, 96, 0.2), 0 0 15px rgba(39, 174, 96, 0.1); }
}
@keyframes pulseGlowLight { /* Specific keyframe for light theme purple glow */
    0% { box-shadow: inset 0 0 10px rgba(124, 58, 237, 0.1), 0 0 0 rgba(124, 58, 237, 0); }
    100% { box-shadow: inset 0 0 15px rgba(124, 58, 237, 0.2), 0 0 15px rgba(124, 58, 237, 0.1); }
}

/* Apply light theme animation when body has light-theme class */
body.light-theme .loading-state {
    box-shadow: inset 0 0 10px rgba(124, 58, 237, 0.1); /* Initial shadow for light theme */
    animation: pulseGlowLight 2s infinite alternate; /* Apply light theme animation */
}


.loading-state .spinner {
    border: 8px solid var(--border-subtle);
    border-top: 8px solid var(--accent-color); /* Spinner color uses accent var */
    border-radius: 50%;
    width: 70px; /* Larger spinner */
    height: 70px;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-state .message {
    font-size: 1.5rem; /* Larger message */
    color: var(--text-primary);
    font-weight: 700;
}
.loading-state .small-text {
    font-size: 1rem; /* Slightly larger helper text */
    color: var(--text-muted);
    max-width: 400px;
    line-height: 1.5;
}

/* --- Generated Code Display State --- */
.generated-code-display {
    display: none; /* Hidden by default, shown by JS */
    background-color: var(--bg-primary);
    border: 1px solid var(--border-subtle);
    padding: 50px;
    /* Changed gap to use with new flex wrapper */
    gap: 40px; /* Spacing between major elements: header, code-content-flex, action-buttons */
    box-shadow: 0 0 20px rgba(39, 174, 96, 0.2); /* Highlight success - dark theme green */
    animation: fadeInScale 0.6s ease-out; /* Fade in and subtle scale */
    flex-direction: column; /* Ensure main container stacks its children vertically */
}
body.light-theme .generated-code-display {
    box-shadow: 0 0 20px rgba(124, 58, 237, 0.2); /* Light theme purple glow */
}
@keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

/* NEW: Flex Container for Download and Next Steps Sections */
.code-content-flex {
    display: flex;
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: 40px; /* Space between the two columns */
    align-items: flex-start; /* Align columns to the top */
}

.download-section {
    flex: 1; /* Allow download section to grow */
    min-width: 300px; /* Minimum width before wrapping */
    background-color: var(--bg-secondary); /* Give it a distinct background */
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    padding: 30px; /* Adjusted padding */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Subtle shadow for the card */
    transition: all 0.3s ease;
}
.download-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.download-section h3 {
    font-size: 1.8rem; /* Slightly smaller for better hierarchy */
    color: var(--accent-color); /* Highlight with accent color */
    margin-bottom: 10px;
}
.download-section p {
    font-size: 1rem;
    color: var(--text-primary); /* Changed to primary for better contrast */
    margin-bottom: 20px;
    line-height: 1.6;
}
.download-buttons {
    display: flex;
    flex-direction: column; /* Stack buttons vertically */
    gap: 15px;
    width: 100%; /* Take full width of its parent */
    max-width: 300px; /* Constrain buttons width for visual balance */
}
.download-buttons .btn {
    padding: 15px;
    font-size: 1rem; /* Slightly smaller font for consistency */
}

.next-steps-section {
    flex: 2; /* Allow next-steps section to take more space */
    min-width: 350px; /* Minimum width before wrapping */
    background-color: var(--bg-secondary); /* Give it a distinct background */
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    padding: 30px; /* Adjusted padding */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Subtle shadow for the card */
    transition: all 0.3s ease;
}
.next-steps-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.next-steps-section h3 {
    font-size: 1.8rem;
    color: var(--accent-color); /* Highlight with accent color */
    font-weight: 700;
}
.next-steps-message {
    font-size: 1rem; /* Slightly smaller for readability in block */
    color: var(--text-muted);
    line-height: 1.8;
    max-width: 700px; /* Keep text readable */
    text-align: center; /* Center align for better look */
}
.next-steps-message strong {
    color: var(--text-primary); /* Bold strong tags with primary text color for contrast */
}

/* Style for the emphasized text in the message */
.next-steps-message .emphasized-text {
    font-size: 1.15em; /* Make it 15% larger than the parent font size */
    font-weight: 800; /* Make it extra bold */
    color: var(--text-primary); /* Ensure it contrasts well */
}


.action-buttons { /* This group now contains only the "Looks Good, Proceed!" button */
    display: flex;
    justify-content: center;
    width: 100%;
    margin-top: 20px; /* Space from message */
}
.action-buttons .btn {
    min-width: 280px; /* Make it prominent */
    padding: 18px 30px;
    font-size: 1.3rem;
    font-weight: 700;
}


/* --- NEW: Custom Modal Overlay & Box Styles (reused from custom-dev.css for consistency) --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1005; /* Ensure it's above other elements */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal-overlay.show {
    opacity: 1;
    visibility: visible;
}

.modal-box {
    background: var(--bg-secondary);
    padding: 30px;
    border-radius: 12px;
    max-width: 500px; /* Adjust max width as needed */
    width: 90%;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    position: relative;
    transform: scale(0.9);
    transition: transform 0.3s ease;
    border: 1px solid var(--border-subtle);
    text-align: center; /* Center text by default */
}

.modal-overlay.show .modal-box {
    transform: scale(1);
}

.modal-box h3 {
    font-family: 'Poppins', sans-serif;
    font-size: 1.8rem;
    color: var(--text-primary);
    margin-bottom: 15px;
    display: flex; /* For icon alignment */
    align-items: center;
    justify-content: center;
}

.modal-box p {
    font-size: 1rem;
    color: var(--text-muted);
    line-height: 1.6;
    margin-bottom: 20px;
}
/* Ensure strong tags within modals are visible */
.modal-box p strong {
    color: var(--text-primary);
}


.modal-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap; /* Allow buttons to wrap on small screens */
}

.modal-buttons .btn {
    flex: 1; /* Allow buttons to grow */
    min-width: 180px; /* Ensure buttons don't get too small */
}

.modal-close-btn { /* Style for the 'X' button in modals */
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 1.8rem;
    color: var(--text-muted);
    cursor: pointer;
    transition: color 0.2s ease;
}
.modal-close-btn:hover {
    color: var(--text-primary);
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    .preview-container {
        padding: 30px;
        margin: 40px auto;
        gap: 20px;
    }
    .preview-header h2 {
        font-size: 2.2rem;
    }
    .preview-header p.subheadline {
        font-size: 1.1rem;
    }
    .loading-state, .generated-code-display, .error-state {
        padding: 30px;
        gap: 20px;
    }
    .loading-state .spinner {
        width: 50px;
        height: 50px;
    }
    .loading-state .message, .error-state .message {
        font-size: 1.3rem;
    }
    .loading-state .small-text, .error-state .small-text {
        font-size: 0.95rem;
    }

    .code-content-flex {
        flex-direction: column; /* Stack columns on smaller screens */
        gap: 30px;
    }
    .download-section, .next-steps-section {
        min-width: unset; /* Remove min-width to allow full stacking */
        width: 100%;
        padding: 25px; /* Adjust padding for smaller cards */
    }

    .download-section h3, .next-steps-section h3 {
        font-size: 1.6rem; /* Adjust heading size */
    }
    .download-section p, .next-steps-message {
        font-size: 0.95rem;
    }
    .download-buttons {
        flex-direction: column; /* Keep buttons stacked in column */
        gap: 10px;
    }
    .download-buttons .btn {
        min-width: unset;
        width: 100%;
        font-size: 0.95rem;
    }
    .action-buttons .btn {
        min-width: 100%;
        font-size: 1.1rem;
        padding: 15px 20px;
    }

    .next-steps-message .emphasized-text {
        font-size: 1.1em; /* Adjust for smaller screens */
    }
}